(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{209:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events","aria-hidden":"true"}},[t._v("#")]),t._v(" Events")]),t._v(" "),s("p",[t._v("Klaviyo Connect provides the following events you can use in your own custom plugin, to define your own custom mappings.")]),t._v(" "),s("h2",{attrs:{id:"addprofilemapping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#addprofilemapping","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("addProfileMapping")])]),t._v(" "),s("p",[t._v("Add a custom mapping for user profiles.")]),t._v(" "),s("h3",{attrs:{id:"class-profilemapping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-profilemapping","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("class ProfileMapping")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("name")])]),t._v(" "),s("li",[s("code",[t._v("description")])]),t._v(" "),s("li",[s("code",[t._v("handle")]),t._v(" - A unique handle which Klaviyo Connect can associate the mapping with")]),t._v(" "),s("li",[s("code",[t._v("method")]),t._v(" - The method in your plugin to call to execute the mapping. Receives array of form parameters as an argument.")])]),t._v(" "),s("h3",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("AddProfileMappingEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Profile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ProfileMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT_ADD_PROFILE_MAPPING")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AddProfileMappingEvent "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Define your mapping")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$myMapping")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProfileMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'name'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'My Custom Profile Mapping'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'handle'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'mycustom_mapping'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'description'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'A custom profile mapping'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'method'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$params")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$profile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Profile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Perform profile mapping...")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$profile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Add it to list of mappings")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("mappings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$myMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Use your custom mappings as you would the built-in ones:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("klaviyoProfileMapping"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mycustom_mapping"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),s("h2",{attrs:{id:"trackeventmapping-eventname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trackeventmapping-eventname","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("trackEventMapping($eventName)")])]),t._v(" "),s("p",[t._v("Add a custom mapper to set extra properties on an event. See the "),s("code",[t._v("extra")]),t._v(" parameter in Event Form Parameters in "),s("router-link",{attrs:{to:"/Actions.html"}},[t._v("Actions")])],1),t._v(" "),s("h3",{attrs:{id:"class-trackeventmappingevent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-trackeventmappingevent","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("class TrackEventMappingEvent")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("properties")]),t._v(" - Custom properties to pass through to Klaviyo with the tracked event.")])]),t._v(" "),s("h3",{attrs:{id:"example-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("controllers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ApiController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("events"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("TrackEventMappingEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token package"}},[t._v("fostercommerce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("klaviyoconnect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("EventProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\nEvent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  ApiController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ApiController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT_TRACK_EVENT_MAPPING")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TrackEventMappingEvent "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Add your custom event properties to the tracking data")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$e")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Foo'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Bar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Note:")]),t._v(" Using this will overwrite any existing data in the "),s("code",[t._v("EventProperties::extra")]),t._v(" field.")]),t._v(" "),s("h2",{attrs:{id:"klaviyo-special-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#klaviyo-special-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Klaviyo Special Properties")]),t._v(" "),s("p",[t._v("The Klaviyo API includes the following special properties via HTTP.")]),t._v(" "),s("h3",{attrs:{id:"user-profile-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-profile-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" User Profile Properties")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("$id")]),t._v(" - your unique identifier for a person")]),t._v(" "),s("li",[s("code",[t._v("$email")]),t._v(" - email address")]),t._v(" "),s("li",[s("code",[t._v("$first_name")]),t._v(" - first name")]),t._v(" "),s("li",[s("code",[t._v("$last_name")]),t._v(" - last name")]),t._v(" "),s("li",[s("code",[t._v("$phone_number")]),t._v(" - phone number")]),t._v(" "),s("li",[s("code",[t._v("$title")]),t._v(" - title at their business or organization")]),t._v(" "),s("li",[s("code",[t._v("$organization")]),t._v(" - business or organization they belong to")]),t._v(" "),s("li",[s("code",[t._v("$city")]),t._v(" - city they live in")]),t._v(" "),s("li",[s("code",[t._v("$region")]),t._v(" - region or state they live in")]),t._v(" "),s("li",[s("code",[t._v("$country")]),t._v(" - country they live in")]),t._v(" "),s("li",[s("code",[t._v("$zip")]),t._v(" - postal code where they live")]),t._v(" "),s("li",[s("code",[t._v("$image")]),t._v(" - url to a photo of the person")])]),t._v(" "),s("h3",{attrs:{id:"event-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#event-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Event Properties")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("$event_id")]),t._v(" - an unique identifier for an event")]),t._v(" "),s("li",[s("code",[t._v("$value")]),t._v(" - a numeric value to associate with this event (e.g. the dollar value of a purchase)")])])])},[],!1,null,null,null);a.default=e.exports}}]);